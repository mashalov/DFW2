12.11.2019
1. Убраны лишние ResetVisited.
2. CalcAdmittances убраны отовсюду. Сейчас расчет проводимостей будет вызываться из ProcessTopology и только после определения суперузлов. Это позволит правильно учитывать в собственных проводимостях
   узлов ненулевые ветви, шунтированные параллельными нулевыми.
3. Убран CDynaModel::PrepareYs.

13.11.2019
1. Суперузлы в УР переведены на _MatrixInfo. StoreParameters убраны.
2. Для суперузлов рассчитывается "неуправляемая" генерация, которая учитывается в балансе суперузла как дополнительная отрицательная нагрузка.
   Необходима для очистки рассчитываемой в УР реактивной генерации PV и активной/реактивной БУ.
3. Сделано распределение расчетной генерации по узлам суперузлов, включая несколько БУ и PV.
4. TODO - обработка объединения нескольких БУ в суперузел.
5. При построении топологических островов в качестве представителей используются БУ, если есть.

14.11.2019
1. Убраны излишние conj(Unode) в расчетах небалансов в УР.
2. В Зейделе сделана экспериментальная реализация учета нагрузки в PQ узле в виде шунта. Работает чуть лучше чем стандартная, но пока выведена.
3. В Ньютоне УР добавлен счетчик переключений узлов, при ненулевом значении которого блокируется выбор шага.
4. WriteResultsHeader поднят наверх и вставлен между TurnOffDevicesByMasters и CreateSuperNodes. В этом варианте в результаты не попадают навсегда
   отключенные устройства и структура модели в результатах остается исходной, без замены родительских узлов на суперузлы.
5. Исправлена схема исключений в Run: теперь 2 слоя: общий и цикл расчета.
6. В CDynaNodeBase добавлено обновление напряжений и окрестности СХН в узлах, входящих в суперузел. Обновление в GetPnrQnrSuper и NewtonUpdateEquation.

15.11.2019
1. Исправлена ошибка в CalculateShuntParts с перепутанным P и Q
2. CalculateShuntParts вынесена в отдельную функцию, чтобы можно было ее вызывать при обновлении напряжения и нагрузок после расчета УР. Она включена
   в CreateSuperNodes. Для корректной работы в PrepareGraph V0 в узлах инициализируется значением из исходных данных. Затем V0 задается либо для УР, либо для
   динамики.
3. CalculateShuntParts требуют для работы СХН генераторных узлов, поэтому вызывается она после расчета УР в InitDevices. В этой функции задается СХН генераторов.
4. В CLoadFlow::Run СХН переключается до того как создаются суперузлы, чтобы CreateShuntParts работала корректно.

16.11.2019
1. Добавлена проверка номинальных напряжений для узлов.
2. Самозамкнутые ветви отключаются с DSC_INTERNAL_PERMANENT
3. PrepareGraph переименована в PrepareNetworkElements
Удаление комментов 
обычное (/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)|(//.*)
с пробелами до коммента (\t+|\s+|\r\n)((/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+/)|(//.*))
4. Отладка переведена на ATLTRACE

17.11.2019
1. CDynaNodeBase::ProcessTopology продублирована в ProcessTopologyInitial, которая в отличие от исходной контролирует наличие суперузлов, и не создает их, если  они уже есть.
   Необходимо для исключения повторного создания суперузлов после расчета УР и их создания в случае, если УР считать было не нужно.

26.12.2021
1. Так как генерация в узлах, не представленная отдельными генераторами, в RUSTab моделируется постоянным током, для таких узлов добавлено поле заданного постоянного
   тока. Поле рассчитывается по заданной в исходных данных мощности узла и расчетному напряжению. Для суперузлов поле постоянного тока суммируется внутри группы. 
   В расчетах правой части уравнений узла постоянный ток учитывается как заданный. При расчете LULF() также просто добавляется к току узла.
   Данный вариант сделан для совместимости с RUSTab. До этого момента генерация из узлов без генерации моделировалась постоянной мощностью по СХН.
2. Генераторы ШБМ и уравнение движения переведены на шунт Нортона (на тесте на 100 шагов меньше). Шунт вводится прямо в проводимость узла на землю обходом
   генераторов, которые инцидентны узлу. Если генератор возвращает ненулевой шунт, он учитывается в собственной проводимости. В LULF Нортон не добавляется
   к проводимости диагонали повторно (вычитается из 1/Zgen). Так как шунт вводится в Yii, он автоматически учитывается в YiiSuper. Состояние генераторов
   учитывается при новом расчете проводимостей узла. Особенность - генераторы с шунтом Нортона выдают в результаты ток только от ЭДС. Возможно вещественный 
   и мнимый токи стоит просто убрать из пользовательских результатов.
